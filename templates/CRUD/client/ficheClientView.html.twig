{% extends '@SonataAdmin/standard_layout.html.twig' %}

{% block sonata_admin_content %}
{% for message in app.flashes('success') %}
<div class="alert alert-success">
    {{ message }}
</div>
{% endfor %}
 {# {{ dump(client) }} #}
<h1>Fiche Client</h1>
<h2>{{ client.clientNom |upper}} {{ client.clientPrenom}}</h2>
<p>Inscrit le {{ client.user.registerDate |date('d/m/Y')}}</p>
<p>Tél : {{ client.clientContact.contactTelmobile}}</p>
<p>Mail : {{ client.user.email}}</p>
<p>{{ client.countDemande}} Démarche en cours : </p>
<table class="">
    <tr>
        <th>Type</th>
        <th>Status</th>
    </tr>
    {% for commande in client.commandes %}
    {% if commande.demande is not null %}
    <tr>
        <td>{{commande.demarche.type}}</td>
        <td>
            <span class="badge badge-{{ statusOfCommande(commande, "style") }}">
                {{ statusOfCommande(commande, "text") }}
            </span>
        </td>
    </tr>
    {% endif %}
    {% endfor %}
</table>
<table class="">
    <tr>
        <th>Objet</th>
        <th>Date</th>
    </tr>
    {% for mail in client.user.emailHistories %}
    <tr>
        <td>{{mail.subject}}</td>
        <td>{{mail.createdAt |date('d/m/Y')}}</td>
    </tr>
    {% endfor %}
</table>
{% endblock %}