{% extends 'base.html.twig' %}

{% block title %}Home{% endblock %}
{% block stylesheets %}
<style type="text/css">
#formulaire_immatriculation{
	text-transform:uppercase; !important
}
</style>
{% endblock %}

{% block body_id %}{% endblock %}
{%  block class %}
	{% if commande is not defined %}
	{% if taxe is not defined %}
		body-accueil
	{% endif %}
	{% endif %}
{%  endblock %}

{% block page_content %}
	{% if database %}
		{% if commande is defined %}
			{% if taxe is defined %}
				{% if recap is defined %}
    				<div class="container">
						<div class="row">
							<div class="col-md-12 col-lg-12 resultat-estimation mx-auto">
								<div class="row recap-demande-wrapper  pt-5 pb-5">
									<img src="{{ asset('asset/CarLogos/Logos/'~commande.carInfo.marque | lower~'.jpg') }}" class="rounded col-2 mx-auto d-block img-thumbnail mb-3 src_img" style="height:100px;" alt="{{commande.carInfo.marque}}">
									<div class="col-10 mx-auto">
										<h2 class="col-12 mb-5 row mx-0">{{ 'home.recapDemande'|trans}}</h2>
										{{ include('commande/_resum_recap_demande.html.twig') }}
									</div>
								</div>
								<div class="col-md-12 px-0 col-lg-12 mx-auto d-flex my-flex-container pb-5">
									<div class="col-12 px-0 row">
										<div class="col-6 mx-auto">
											<h2 class="mb-4">{{ 'home.carSkills'|trans}}</h2>
											{{ include('commande/_resum_caracteristics_car.html.twig') }}
										</div>
										<div class="col-6 mx-auto">
											<h2 class="mb-4">{{ 'home.detailTaxes'|trans}}</h2>
											{{ include('commande/_resum_taxe_car.html.twig') }}
										</div>
										<div class="col-12 mx-auto mt-5">
											{% if app.user %}
												<a class="btn btn-blue" href="{{path('payment_request', {'commande': recap.id })}}">{{ 'label.paid'|trans}} <i class="icon-right-arrow"></i></a>
											{% else %}
												<!-- Button trigger modal -->
												<button type="button" class="btn-validate-command d-flex align-items-center justify-content-between btn btn-blue" data-toggle="modal" data-target="#exampleModalCenter">
													{{ 'home.validateComand'|trans}}<i class="icon-right-arrow"></i>
												</button>
												<!-- Modal -->
												<div class="modal fade mx-auto custom-mobile-modal" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
													<div class="modal-dialog modal-dialog-centered" role="document">
														<div class="modal-content">
															<div class="modal-header">
																<h3 class="modal-title" id="exampleModalCenterTitle">Connectez-vous <span>pour valider et suivre votre commande</span></h3>
																<button type="button" class="close" data-dismiss="modal" aria-label="Close">
																	<i class="icomoon icon-close"></i>
																</button>
															</div>
															<div class="modal-body">
																<div class="row">
																	<div class="col-12 col-lg-10 mx-auto">
																		<div class="custom-container-flex  text-center">
																			<p class="mb-1">{{ 'home.noAcount'|trans}}</p>
																			<a class="btn link-connexion link-connexion-register" href="{{ path('fos_user_registration_register') }}">
																				{{ 'home.createAcountButton'|trans}} <i class="icomoon icon-modifier"></i>
																			</a>
																		</div>
																		<div class="custom-container-flex bdr-sep mt-3">
																			<p class="se-connecter">{{ 'home.loginConnnex'|trans}}</p>
																			{% include "bundles/FOSUserBundle/Security/login_content.html.twig" %}
																		</div>
																	</div>
																</div>
															</div>
														</div>
													</div>
												</div>
                            				{% endif %}
                        				</div>
                    				</div>
                				</div>
            				</div>
    					</div>

								<!-- Modal -->
								<div class="modal fade mx-auto custom-mobile-modal" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
									<div class="modal-dialog modal-dialog-centered" role="document">
										<div class="modal-content">
											<div class="modal-header">
												<h3 class="modal-title" id="exampleModalCenterTitle">Connectez-vous <span>pour valider et suivre votre commande</span></h3>
												<button type="button" class="close" data-dismiss="modal" aria-label="Close">
													<i class="icomoon icon-close"></i>
												</button>
											</div>
											<div class="modal-body">
												<div class="row">
													<div class="col-12 col-lg-10 mx-auto">
														<div class="custom-container-flex  text-center">
															<p class="mb-1">{{ 'home.noAcount'|trans}}</p>
															<a class="btn link-connexion link-connexion-register" href="{{ path('fos_user_registration_register') }}">
																{{ 'home.createAcountButton'|trans}} <i class="icomoon icon-modifier"></i>
															</a>
														</div>
														<div class="custom-container-flex bdr-sep mt-3">
															<p class="se-connecter">{{ 'home.loginConnnex'|trans}}</p>
															{% include "bundles/FOSUserBundle/Security/login_content.html.twig" %}
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				{% endif %}
			{% endif %}
		{% else %}
			{{ include('home/composant/menu-commander-fin.html.twig') }}
		{% endif %}
	{% else %}
		{% if commande is defined %}
			{% if taxe is defined %}
				<div class="col-md-12 col-lg-10 mx-auto d-flex flex-row justify-content-center my-flex-container align-items-center">
					<div class="row d-flex flex-row-reverse my-flex-container pt-5 pb-5">
						<img src="{{ asset('asset/CarLogos/Logos/'~commande.carInfo.marque | lower~'.jpg') }}" class="rounded mx-auto d-block img-thumbnail mb-3" style="height:100px;" class="img-thumbnail src_img" alt="{{carInfo.marque}}">
						<h2 class="col-12">
							{{ 'home.recapDemande'|trans}}
							{{commande.demarche.type | lower}}</h2>
						{{ include('commande/_resum_recap_demande.html.twig') }}

						<h2 class="col-12">{{ 'home.carSkills'|trans }}</h2>
						{{ include('commande/_resum_caracteristics_car.html.twig') }}
						<br>

						<h2 class="col-12">{{'home.detailTaxes'|trans}}</h2>
						{{ include('commande/_resum_taxe_car.html.twig') }}
						<br>
						<div class="col-12 resultat-estimation-p">
							<p>
								{{ 'home.condition'|trans }}
							</p>
						</div>

						{% if app.user %}
							<a class="col-12 btn btn-success" href="{{path('Accueil')}}{{ commande.demarche.type | lower}}/?commande={{ commande.id }}">{{ 'home.validate'|trans }}</a>
						{% else %}
							{# <a class="col-12 btn btn-primary mb-3" href="{{ path('france_connect_login') }}">{{ 'home.franceConnecte'|trans }}</a> #}
							<a class="col-12 btn btn-success" href="{{ path('fos_user_registration_register',{'commande':commande.id}) }}">{{ 'home.validate'|trans }}</a>
						{% endif %}
					</div>
				</div>
			{% endif %}
		{% else %}
			{{ include('home/composant/menu-commander-fin.html.twig') }}
		{% endif %}
	{% endif %}

<!-- Modal -->
<div class="modal fade mx-auto custom-mobile-modal" id="modalCookies" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<img src="{{  asset('asset/img/logo.png')}}" class="logo-rgpd">
				<h3 class="modal-title" id="exampleModalCenterTitle"><span>Centre de préférences de la confidentialité</span></h3>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<i class="icomoon icon-close"></i>
				</button>
			</div>
			<div class="modal-body-cookies">
				<div class="row">
					<div class="col-12 col-lg-10 mx-auto">
						<div class="row">
							<div class="col-lg-4 col-sm-6">
								<div class="custom-container-flex bdr-sep mt-3">
									<div class="nav flex-column nav-pills me-3" id="v-pills-tab" role="tablist" aria-orientation="vertical">
										<a class="nav-link active" id="v-pills-confidentiality-tab" data-bs-toggle="pill" href="#v-pills-confidentiality" role="tab" aria-controls="v-pills-confidentiality" aria-selected="true">Votre confidentialité</a>
										<a class="nav-link" id="v-pills-necessary-tab" data-bs-toggle="pill" href="#v-pills-necessary" role="tab" aria-controls="v-pills-necessary" aria-selected="false">Cookies nécessaires</a>
										<a class="nav-link" id="v-pills-analytics-tab" data-bs-toggle="pill" href="#v-pills-analytics" role="tab" aria-controls="v-pills-analytics" aria-selected="false">Cookies analytiques</a>
										<a class="nav-link" id="v-pills-functional-tab" data-bs-toggle="pill" href="#v-pills-functional" role="tab" aria-controls="v-pills-functional" aria-selected="false">Cookies fonctionnels</a>
										<a class="nav-link" id="v-pills-ads-tab" data-bs-toggle="pill" href="#v-pills-ads" role="tab" aria-controls="v-pills-ads" aria-selected="false">Cookies publicitaires</a>
									</div>
								</div>
							</div>
							<div class="col-lg-8 col-sm-6">
								<div class="tab-content" id="v-pills-tabContent">
									<div class="tab-pane fade show active" id="v-pills-confidentiality" role="tabpanel" aria-labelledby="v-pills-confidentiality-tab">
										<div class="row">
											<div class="col-7 col-sm-6 col-sm-6"><h4 id="list-item-2">Votre confidentialité</h4></div>
											<div class="col-5 col-sm-6">
												<div class="form-check form-switch">
													<input class="form-check-input" type="checkbox" id="flexSwitchCheckChecked" checked name="my-checkbox">
												</div>
											</div>
										</div>									
										
										<p>Votre confidentialité lorsque vous consultez un site Web, des données peuvent être stockées dans votre navigateur ou récupérées à 
										partir de celui-ci, généralement sous la forme de cookies. Ces informations peuvent porter sur vous, sur vos préférences ou sur 
										votre appareil et sont principalement utilisées pour s'assurer que le site Web fonctionne correctement. 
										Les informations ne permettent généralement pas de vous identifier directement, mais peuvent vous permettre de bénéficier d'une 
										expérience Web personnalisée. Parce que nous respectons votre droit à la vie privée, nous vous donnons la possibilité de ne pas 
										autoriser certains types de cookies. Cliquez sur les différentes catégories pour obtenir plus de détails sur chacune d'entre elles, 
										et modifier les paramètres par défaut. Toutefois, si vous bloquez certains types de cookies, votre expérience de navigation et 
										les services que nous sommes en mesure de vous offrir peuvent être impactés. Plus d’informations</p>
									</div>
									<div class="tab-pane fade" id="v-pills-necessary" role="tabpanel" aria-labelledby="v-pills-necessary-tab">
										<div class="row">
											<div class="col-7 col-sm-6"><h4 id="list-item-2">Cookies nécessaires</h4></div>
											<div class="col-5 col-sm-6">
												<div class="form-check form-switch">
													<input class="form-check-input" type="checkbox" id="flexSwitchCheckChecked" checked name="my-checkbox">
												</div>
											</div>
										</div>
										<p>Il s'agit des cookies nécessaires au fonctionnement de notre site. Ils vous permettent d'utiliser les principales fonctionnalités de notre site (par exemple utilisation du panier d'achat ou l'accès à votre compte). Sans ces cookies, vous ne pourrez pas utiliser notre site normalement. Il s'agit de cookies déposés par CGOfficiel qui ne concernent que le fonctionnement de notre site et qui ne requièrent pas l’information et l’accord préalable de l’internaute pour être déposés sur son terminal.</p>
									</div>
									<div class="tab-pane fade" id="v-pills-analytics" role="tabpanel" aria-labelledby="v-pills-analytics-tab">
										<div class="row">
											<div class="col-7 col-sm-6"><h4 id="list-item-2">Cookies analytiques</h4></div>
											<div class="col-5 col-sm-6">
												<div class="form-check form-switch">
													<input class="form-check-input" type="checkbox" id="flexSwitchCheckChecked" checked name="my-checkbox">
												</div>
											</div>
										</div>
										<p>Il s'agit des cookies qui nous permettent de connaître l'utilisation, les volumes de fréquentation et d’utilisation ainsi que les performances de notre site. Ces cookies permettent à CGOfficiel d’améliorer l’intérêt, l’ergonomie et le fonctionnement des services proposés sur le site (par exemple, les pages le plus souvent consultées, recherches des internautes dans le moteur du site...).</p>
									</div>
									<div class="tab-pane fade" id="v-pills-functional" role="tabpanel" aria-labelledby="v-pills-functional-tab">
										<div class="row">
											<div class="col-7 col-sm-6"><h4 id="list-item-2">Cookies fonctionnels</h4></div>
											<div class="col-5 col-sm-6">
												<div class="form-check form-switch">
													<input class="form-check-input" type="checkbox" id="flexSwitchCheckChecked" checked name="my-checkbox">
												</div>
											</div>
										</div>
										<p>Il s'agit des cookies qui nous permettent d’identifier les informations du site qui pourraient vous intéresser aux fins de personnaliser votre expérience sur notre site (par exemple vous rappeler les derniers produits consultés, mémoriser les articles de votre panier avant de poursuivre vos achats.). Ils vous permettent également de bénéficier de nos conseils personnalisés et d'offres promotionnelles en fonction de votre origine de navigation (par exemple si vous venez de nos sites partenaires). Ils peuvent aussi être utilisés pour vous fournir des fonctionnalités que vous avez sollicités (ex mon magasin préféré, mes conseils personnalisés...). Afin de personnaliser votre expérience d’achat nous pouvons associer des données de navigation traitées par les cookies avec les données de nos bases clients relatives à votre compte ou à vos achats sur notre site.</p>
									</div>
									<div class="tab-pane fade" id="v-pills-ads" role="tabpanel" aria-labelledby="v-pills-ads-tab">
										<div class="row">
											<div class="col-7 col-sm-6"><h4 id="list-item-2">Cookies publicitaires</h4></div>
											<div class="col-5 col-sm-6">
												<div class="form-check form-switch">
													<input class="form-check-input" type="checkbox" id="flexSwitchCheckChecked" checked name="my-checkbox">
												</div>
											</div>
										</div>
										<p>Il s'agit des cookies utilisés pour vous présenter des publicités ou vous adresser des informations adaptées à vos centres d'intérêts sur notre site ou en dehors de notre site lors de votre navigation sur Internet. Ils sont notamment utilisés pour limiter le nombre de fois où vous voyez une publicité et aider à mesurer l'efficacité d'une campagne publicitaire.</p>
									</div>
								</div>
							</div>
						</div>
						<div class="row">
							<div class="col-lg-6 col-sm-6">
								<button class="cookie-alert-message-manage-button btn btn-sm btn-danger" data-dismiss="modal" onClick="javascript:cookiesChecker.accept();">Enregistrer</button>
							</div>
							<div class="col-lg-6 col-sm-6">
								<button class="cookie-alert-message-manage-button btn btn-sm btn-danger" data-dismiss="modal" onClick="javascript:cookiesChecker.accept();">Tout autoriser</button>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
{% endblock %}

{% block pagetext_content %}
	{{ include('home/composant/texte/accueil-texte.html.twig') }}
{% endblock %}

{% block javascripts %}
	<script src="{{ asset('Utils/js/jquery.js')}}" crossorigin="anonymous"></script>
	<script src="{{ asset('Utils/js/jqueryUi.js')}}"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js"
		integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut"
		crossorigin="anonymous"></script>
	<script src="{{ asset('javascript/ckeditor/ckeditor.js') }}" type="text/javascript"></script>
	<script src="{{ asset('javascript/ckeditor/adapters/jquery.js') }}" type="text/javascript"></script>
	<script src="{{ asset('asset/libs/js/jquery.sticky.js') }}" type="text/javascript"></script>
	<script src="{{ asset('asset/libs/js/bootstrap.min.js') }}" type="text/javascript"></script>
	<script src="{{ asset('asset/libs/js/parallax.min.js') }}" type="text/javascript"></script>
	<script src="{{ asset('asset/dist/owl.carousel.min.js') }}"></script>
	<script src="{{ asset('javascripts/selectForm.js') }}" type="text/javascript"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-switch/3.3.2/js/bootstrap-switch.min.js"></script>
	<script src="{{ asset('javascripts/home.js') }}" type="text/javascript"></script>
	{% if (is_full_view() or is_not_mobile_view())%}
		<script src="{{ asset('javascripts/tiretAuto.js') }}"></script>
	{% endif %}
	<script type="text/javascript">
        cookiesChecker.init();
	</script>
	<script type="text/javascript">
		$(function () {
			$('textarea.ckeditor').ckeditor();
		})
		$('#myModal').on('shown.bs.modal', function () {
			$('#myInput').trigger('focus')
		});
	</script>
	<script type="application/javascript">

	$(document).ready(function() {
		{% if defaultDemarche is defined and defaultDemarche is not null %}
			$("#formulaire_demarche").parent('div').find('ul.select-options').find('li[rel="{{defaultDemarche.id}}"]').click();
		{% endif %}
	});
		{% if defaultDepartment is defined and defaultDepartment is not null %}
			setDefault("{{defaultDepartment}}");
			$("#formulaire_codePostal").parent('div').find('ul.select-options').find('li[rel="{{defaultDepartment}}"]').click();
		{% endif %}
		
		{% if info is defined and info is not null %}
			$('#formulaire_demarche').val('{{info}}').change();
		{% endif %}
	</script>
	{# <script type="application/javascript">
		$('.owl-carousel').owlCarousel(
			{
				autoplay: true,
				autoplayHoverPause: true,
				margin: 5,
				stagePadding: 5,
				responsive: {
					0:{
						items: 1,
						dots: false
					},
					485:{
						items: 2,
						dots: false
					},
					728:{
						items: 2,
						loop: true
					},
					960:{
						items: 3,
						loop: true
					},
					1200:{
						items: 3,
						loop: true
					}
				}
			}
		);
	</script> #}
{% endblock %}